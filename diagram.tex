% This document contains a tentative of dependency diagram for the Humanoid League roadmap

\tikzstyle{element}=[rectangle, draw=black, rounded corners, text centered,
  anchor=north, text width=2cm, minimum height= 1cm]
\tikzstyle{researchTopic}=[rectangle, rounded corners,
  anchor=north, minimum height= 1cm, font=\bfseries]
\tikzstyle{transitionNote}=[rectangle, right, rounded corners, %text left,
  text width=3cm, minimum height= 1cm]
\tikzstyle{dependency} = [->, thick]

\begin{tikzpicture}[node distance=1cm, every node/.style={scale=0.6}]
  % Locomotion
  \node (Walking) [element] {Walking};
  \node (Running) [element, below=of Walking] {Running};
  \draw [dependency] (Walking) -- (Running);
  % Falling column
  \node (StandingUp) [element,right=of Walking] {Falling and standing up};
  \node (Diving) [element,below=of StandingUp] {Diving goalie};
  \draw [dependency] (StandingUp) -- (Diving);
  % TODO add dependency to tracking ball
  
  % TODO: missing ball manipulation (hands + foot)
  % Kicking (add the transition part (kick from walking / kick from running))
  % Add the high kick?
  \node (StaticKick) [element,right=of StandingUp] {Static Kick};
  \node (RollingKick) [element, below=of StaticKick] {Kick from rolling ball};
  \node (FlyingKick) [element, below=of RollingKick] {Kick from flying ball};
  \draw [dependency] (StaticKick) -- (RollingKick);
  \draw [dependency] (RollingKick) -- (FlyingKick);
  % Perception
  \node (BallDetection) [element,right=of StaticKick] {Ball detection};
  \node (RollingBall) [element,below=of BallDetection] {Rolling ball tracking};
  \node (FlyingBall) [element,below=of RollingBall] {Flying ball tracking};
  \draw [dependency] (BallDetection) -- (RollingBall);
  \draw [dependency] (RollingBall) -- (FlyingBall);
  % Environment information
  \node (SidePoles) [element,right=of BallDetection] {Side Poles};
  \node (ColorCoded) [element,below=of SidePoles] {Colored objects};
  \node (HumanLike) [element,below=of ColorCoded] {No colors};
  \draw [dependency] (SidePoles) edge node [transitionNote] {2012: Side poles\\2013: Yellow goals} (ColorCoded) ;
  \draw [dependency] (ColorCoded) edge node [transitionNote] {2015:\\White goals\\White ball} (HumanLike);
  % Ground type (Carpet, Turf, outdoor ground)
  \node (Carpet) [element,right=of SidePoles] {Carpet};
  \node (Turf) [element,below=of Carpet] {Artificial turf};
  \node (RealGrass) [element,below=of Turf] {Soccer field surface};
  \draw [dependency] (Carpet) edge node [transitionNote] {2015: 30mm turf} (Turf);
  \draw [dependency] (Turf) -- (RealGrass);
  
  % Nb players
  \node (1player) [element,right=of Carpet] {1 vs 1};
  \node (2players) [element,below=of 1player] {2 vs 2};
  \node (3players) [element,below=of 2players] {3 vs 3};
  \node (4players) [element,below=of 3players] {4 vs 4};
  \node (6players) [element,below=of 4players] {6 vs 6};
  \node (8players) [element,below=of 6players] {8 vs 8};
  \node (11players) [element,below=of 8players] {11 vs 11};
  \draw [dependency] (1player)  edge node [transitionNote] {2019: Adult Size} (2players);
  \draw [dependency] (2players) edge node [transitionNote] {2016 or 2017: Teen Size} (3players);
  \draw [dependency] (3players) edge node [transitionNote] {2014: Kid Size} (4players);
  \draw [dependency] (4players) -- (6players);
  \draw [dependency] (6players) -- (8players);
  \draw [dependency] (8players) -- (11players);

  % Field sizes
  \node (6by4) [element,right=of 1player]{$6 \times 4$};
  \node (9by6) [element ,below=of 6by4]{$9 \times 6$};
  \node (14by9) [element,below=of 9by6]{$14 \times 9$};
  \node (23by15) [element,below=of 14by9]{$23 \times 15$};
  \node (34by23) [element,below=of 23by15]{$34 \times 23$};
  \node (50by34) [element,below=of 34by23]{$50 \times 34$};
  \node (75by50) [element,below=of 50by34]{$75 \times 50$};
  \node (105by70) [element,below=of 75by50]{$105 \times 70$};
  \draw [dependency] (6by4) edge node [transitionNote] {2011: Teen Size\\2012: Adult Size\\2014: Kid Size} (9by6);
  \draw [dependency] (9by6) edge node [transitionNote]  {2019: Adult Size} (14by9);
  \draw [dependency] (14by9) -- (23by15);
  \draw [dependency] (23by15) -- (34by23);
  \draw [dependency] (34by23) -- (50by34);
  \draw [dependency] (50by34) -- (75by50);
  \draw [dependency] (75by50) -- (105by70);

  % Cross category dependencies
  \draw [dependency] (RollingBall) -- (RollingKick);
  \draw [dependency] (FlyingBall) -- (FlyingKick);

  % Research topics
  \node (Motion) [researchTopic,text=violet] at ($(StandingUp) + (0,1)$) {Motion};
  \draw [draw=violet] ($(Motion) - (3.4,6)$) rectangle ($(Motion) + (3.4,0.5)$);
  
  \node (Perception) [researchTopic,text=orange] at ($(BallDetection) + (1.25,1)$) {Perception};
  \draw [draw=orange] ($(Perception) - (2.4,6)$) rectangle ($(Perception) + (2.4,0.5)$);
\end{tikzpicture}

%TODO: add removal of magnetometer ?
