\documentclass{article}

\usepackage[
    backend=bibtex, 
    natbib=true,
    style=alphabetic,
    citestyle=alphabetic,
    maxcitenames=1,
    maxbibnames=99
]{biblatex}

\usepackage[utf8]{inputenc} 
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{graphicx}
\usepackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{positioning}
\usepackage{url}
\usepackage{rotating}
\usepackage{graphicx}            % For pdf/bitmapped graphics files
\graphicspath{{images/}}
\DeclareGraphicsExtensions{.pdf,.png,.jpg,.jpeg}

\addbibresource{roadmap.bib}

\begin{document}

\section{Introduction}

% Document: proposal to replace 2014 version: main issues identified
% - Difficult to plan long-term evolution in research -> guided by breakthrough
% - Example of kid-size
This document is a proposal to replace the roadmap proposed in 2014 for the
RoboCup humanoid
league~\footnote{\url{http://www.robocuphumanoid.org/wp-content/uploads/HumanoidLeagueProposedRoadmap.pdf}}. Criticism
have emerged with respect to establishing a long-term schedule for evolution of
the rules in a research context where evolution is mainly guided by breakthrough
rather than by linear development. Some of the changes planned revealed to be
difficult to implement: the removal of the KidSize initially planned for 2020
seems now unrealistic since this league still received more applications than
TeenSize and AdultSize together in 2019. Finally, the relationship between
missing skills and research topics was not explicited.

% Aim of this document + events to gather opinions
In order to avoid facing this issues, a different approach is used. Rather than
establishing a long-term schedule, the document describes the targeted challenge
for the league, the steps required to tackle it. Upcoming changes in the next 5
years are described in more detail to allow teams to plan their developments. In
order to produce a roadmap satisfying for both the trustees and the league, a
workshop was run at IROS2018 and polls have been proposed to both of them. While
a consensus was obtained on most of the questions, this process has also shown
that for some propositions it is difficult to reach an agreement.

\subsection{Goals of the roadmap}

\subsection{Which path to follow?}
% First focus toward improving gameplay

\subsection{Structure of the document}

The structure of the documents is as
follows. Section~\ref{sec:Scientific_Challenges} introduces the scientific
challenges related to the league and their importance in the games. The major
upcoming changes to the rules are presented in Section~\ref{sec:ShortTerm}. The
global evolution of the leagues is discussed in Section~\ref{sec:LongTerm}
through an event-triggered Roadmap and the history of changes which occured
since the creation of the league.

\section{\label{sec:Scientific_Challenges}Scientific Challenges}

\section{\label{sec:ScientificProblematics}Scientific Challenges}

\subsection{Issues in Motion Generation and Control of Humanoid Robots}

% Very brief history reminder
The first humanoid robot built was the WABOT-1 which was completed in 1972. 
While WABOT-1 was already able to walk, controlling the walking gait of a humanoid robot a challenging problem today. 
From designing dynamic walking gait to running and real-time adaptation of multi-objective motions, motion control of humanoid robots is an active research topic.

% Focus of RoboCup : introduction
While bipedal locomotion is still one of the main issues of the RoboCup humanoid
league in 2019, other motions are also important. 
At the moment these are mainly motions for standing up and kicking a ball on the ground.
In the future, this will also include jumps, headers, volleys, and other highly dynamic motions.
Given the adversarial nature of RoboCup, one of the key elements is also the transition between different motions in order to reduce the time required to achieve complex tasks. 
Finally, a major concern from a mechanical point of view are achieving satisfying performances while using low-cost hardware and ensuring the robustness of the hardware despite the fact that the robots are falling.

\subsubsection{Bipedal locomotion}

% Historically:
% ZMP -> Developed in 1970, still quite used today ``
% Walking, walking on uneven terrain, running

Most approaches to humanoid walking nowadays use the Zero Moment Point ZMP stability criterium first analyzed by Vukobratović et al [1].
Vukobratović proved that the ZMP criterium is a sufficient condition for dynamic stability.

Sugihara developed stable online walking trajectories using an inverted pendulum model.
Many teams in the humanoid league have developed stable walking gaits in the forward directions or omni-directional walking engines [2].

Just like in human soccer, collissions between players with players from the opposing or own team are common.
The increased speed of the robots as well as the increased number of players on the field also necessitates that the robots can compensate for collissions (push recovery).
Pratt et al. introduced capture steps to control a robot during push recovery after a collission [3].

% [1] Vukobratović, Miomir, Branislav Borovac, and Dragoljub Šurdilović. "Zero moment point-Proper interpretation and new applications." Int. Conf. on Humanoid Robots. 2001.
% [2] Sugihara, Tomomichi, Yoshihiko Nakamura, and Hirochika Inoue. "Real-time humanoid motion generation through ZMP manipulation based on inverted pendulum control." Proceedings 2002 IEEE International Conference on Robotics and Automation (Cat. No. 02CH37292). Vol. 2. IEEE, 2002.
% [3] Pratt, Jerry, et al. "Capture point: A step toward humanoid push recovery." 2006 6th IEEE-RAS international conference on humanoid robots. IEEE, 2006.
% 

\subsubsection{Offline and Online Learning of Motions}
% Several specific motions required (standing-up)

Since the development of walking gaits and push recovery motions for humanoid robots is non-trivial and many approaches require complex models of the dynamics of the robot, there has been continuous interest in optimizing motions or even learn motions from scracth using machine learning.
Many approaches to learning of motions have been explored by RoboCup teams and other researchers.
Genetic algorithms [5], Support vector machines SVMs [6], artificial neural networks ANNs [7], cerebellar model articulation controllers CMACs [4], and reinforcement learning (RL) [9] have explored for learning trajectories for walking, push recovery, and other motions. 
These approaches have led to some impressive results, in spite of the fact that applying these techniques to robotics domains is difficult since the perceptions, states, and actions of the robots are continuous, instead of the more common discreet representations (e.g., attribute-value representations).

% [4] Sabourin, Christophe, and Olivier Bruneau. "Robustness of the dynamic walk of a biped robot subjected to disturbing external forces by using CMAC neural networks." Robotics and Autonomous Systems 51.2-3 (2005): 81-99.
% [5] Huan, Tran Thien, Cao Van Kien, and Ho Pham Huy Anh. "Adaptive Evolutionary Neural Network Gait Generation for Humanoid Robot Optimized with Modified Differential Evolution Algorithm." 2018 4th International Conference on Green Technology and Sustainable Development (GTSD). IEEE, 2018.
% [6] Wang, Liyang, et al. "Energy-efficient SVM learning control system for biped walking robots." IEEE transactions on neural networks and learning systems 24.5 (2013): 831-837.
% [7] Kim, Dong W., Nak-Hyun Kim, and Gwi-Tae Park. "ZMP based neural network inspired humanoid robot control." Nonlinear Dynamics 67.1 (2012): 793-806.
% [9] Morimoto, Jun, et al. "A simple reinforcement learning algorithm for biped walking." IEEE International Conference on Robotics and Automation, 2004. Proceedings. ICRA'04. 2004. Vol. 3. IEEE, 2004.

In recent years, many areas of Artificial Intelligence have been revolutionized by deep learning approaches.
Deep learning approaches have also been used increasingly by other humanoid robotics researchers and RoboCup participants [8].

% [8] Hwangbo, Jemin, et al. "Learning agile and dynamic motor skills for legged robots." Science Robotics 4.26 (2019): eaau5872.

Early approaches focused on offline learning approaches, where the motions of the robots are learned prior to a competition.
The training data is usually labelled training data from actual experiments with the robot.
Several algorithms also seed the learning of the robot using synthetic training data generated from simulation or a combination of real-world and simulation data.
Deep learning approaches in general have a higher sample complexity and the generation of good training data is therefore challenging.

More recently several researchers have also applied online machine learning approaches, that is the system learns to optimize its motions during game play.
The aim of these approaches is to reduce errors in the kinematic and dynamic model of the robot.
Another motivation for online learning is to compensate for faults in the robot. For example, a robot that damages one of its hip ervos may learn to adapt its motion during the match, so that it can still help its team albeit less effective than if it were in perfect working order.


\subsection{Compliant Actuators and Soft Robotics}

The most common technology for humanoid robotics use servo motors with spur gears as actuators.
The MX, RX, X series products of Robotis Inc. are used by many teams in the humanoid league, especially in the kid and teen sized leagues.
In the adult sized league, robots usually use actuators build from a combination of servo motors with additional gears to increase the torque.
Several teams now also use harmonic drives (e.g., Robotis Dynamixel Pro series).

The mechanical structures are stiff and built from aluminium or carbon fibres.

Affordable servo motors have poor power to weight ratios and highly dynamic motions are severly limited due to insufficient power output.
Currently, the robots in the humanoid robot league are unable to run.

Furthermore, the first problem with these kind of robots is that it hard to see how these robots will ever be able to run dynamically.
The high impact forces when landing would result in damage to the gear box.

Researchers are actively investigating the use of compliant actuators or new actuation models (e.g., cycloid motors, linear actuators, artificial muscles)

The second problem is that these kind of robots cannot safely operate in joint environments with humans, especially in soccer, where collissions between players occur frequently.

Researchers are investigating protection of the robot mechanics, detection of entangling of robots, and soft materials to ensure that robots do not injure human players.
The safe game play with humans does not only require improved mechanics, but also requires improvements in perception, reasoning, and actions.

\subsubsection{Robustness and reduction of hardware cost}
% - Robots walking all game long (usually, only for demo)
% - Low-cost architecture (risk of damaging the robots, adult-size excepted)

\subsubsection{Motion learning}
% Several specific motions required (standing-up)

\subsubsection{Transition between motions}


\subsection{Perception}
\subsubsection{Visual Perception}
Humanoid soccer robots perceive their environment exclusively through cameras. 
Recent changes in the Humanoid League rules resulted in a soccer environment with less color-coded objects, which makes the perception of the game situation more challenging.
The robots have to perceive the game situation in real-time under realistic conditions.
The simple color segmentation and blob detection approaches that were quite popular in the past \cite{Farazi2015} have become unsuitable, and many teams are using deep learning approaches now \cite{ficht2018nimbro} \cite{schnekenburger2017detection}. 
Aggregation of information and filtering the perception are also crucial to analyze the state of the game with high accuracy.

To reduce the amount of work required to label the dataset for visual perception --- especially for data-hungry machine learning methods like deep learning --- tools have been developed to allow multiple teams to mutualize their efforts toward producing a dataset for the community \cite{imagetagger2018}.
One of the scientific challenges which is specific to Humanoid robots, and other lightweight robots like drones, is the limited computational resources that are mainly due to weight limitations. 

%TODO:talk about semantic perception
%TODO:talk about object 6d pose estimation

\subsubsection{Action Recognition and Prediction}
%TODO:talk about goalie predicting kick direction based on the gesture of the kicker
%Understanding referee gesture


\subsubsection{Robot Detection and Identification}
The use of a team of humanoid robots to collaborate in completing a task is an increasingly important field of research. 
One of the challenges in achieving collaboration is mutual identification and tracking of the robots. One of the scientific challenges in visual perception is a real-time detection and tracking of robots of known and unknown appearance.
Online humanoid robot detection, tracking, and identification are the foundations for good cooperation between the robots. 
There are already some papers for this research topic in a humanoid soccer environment, using filtering \cite{farazi2016real}, and deep recurrent networks \cite{farazi2017online}.


\subsubsection{Localization}
Currently, most of the localization modules are based on particle filters which allow to track multi-modal distributions. 
While these approaches have proved their efficiency, recent advances in the SLAM domain suggest that localization based on factor graphs rather than filtering are more accurate~\cite{Strasdat2012}.
To add another source of information for supporting robot localization especially for when the robot is kidnapped, visual odometry can be considered.
By utilizing the input of the camera system, the 6-DOF motion of the camera can be estimated. SVO 2.0 \cite{forster2014svo} and DSO \cite{engel2018direct} are two example of these approaches for monocular vision.
A sample output of DSO on the soccer field in illustrated in Fig.~\ref{FigDSO}.
Both systems offer built-in support for integration into ROS and allow real-time processing of image data. 
While DSO uses a direct approach based on pixel densities, SVO 2.0 additionally considers features for analyzing visual input. 
When testing these approaches with smooth camera movements over short periods of time, both can calculate stable and accurate motion traces. 
However, extended periods of time or abrupt and fast movements often lead to wrong results or complete failure of these systems. 
One interesting research direction would be integrating IMU information into the visual odometry system to achieve more stable results.
Almost all of the teams in the humanoid league try to solve the localization problem in 3-dimensions.To have more interesting planning, a 6D-localization would be desired.
\begin{figure}[h]
	\centering
		\includegraphics[width=0.5\linewidth]{dso}\vspace{-1ex}
	\caption{ Output sample of DSO on soccer field.}
	\label{FigDSO}
\end{figure}


\subsubsection{Dynamic Model Calibration}
Most of the information used for localization relies on information provided by the camera. 
Having the exact kinematic model of the robot is not always possible. 
Therefore it is necessary to calibrate variations from the designed CAD model to prevent potentially large projection errors for distant objects. 
A calibration of the kinematics on each robot that tunes translation and rotation offsets between the torso and the camera is required. 
These offsets are crucial for a good performance of the pixel to egocentric coordinate projection algorithm.
During the last years, multiple teams have started to work on automatic kinematic calibration. 
These approaches are generally based on the use of visual markers easily detectable such as Aruco Tags~\cite{Garrido-Jurado2014}.

\subsubsection{Verbal Commiunication}
%TODO:talk about coach and referee understanding


\subsection{Decision-making}

\subsection{Interaction with humans}

\subsection{Cost efficient hardware}

\section{\label{sec:ShortTerm}Short-term: upcoming changes}

\subsection{RoboCup 2019 changes}

The major rule changes for RoboCup 2019 are as following:

\begin{itemize}
\item Natural lightning
\item Throw-in, corner kicks, goal kicks % TODO describe more
\item Pick-up/penalties simplification
\item Requiring implementation of an emergency stop button, no constraints on design
\item Adult Size only
  \begin{itemize}
  \item The field size increases to $14 \times 9$ meters (previously $9 \times 6$ meters)
  \item Games are now played 2 vs 2
  \end{itemize}
\end{itemize}

There are also some minor adjustements:

\begin{itemize}
\item Time for repositioning during stoppage of game increased to 45 seconds (previously 30 seconds).
\item New phrasing regarding constraints on foot design.
\item The surface of teams markers is increased and it is allowed to place them on chest.
\end{itemize}

\subsection{RoboCup 2020 changes}

The process of updating the roadmap allowed to identify immediate changes which
could benefit the humanoid league.
One of the most important element is the organization of the league. Since 2010,
the league is composed of 3 leagues, KidSize, TeenSize and AdultSize.
While this structure was adapted at that time, evolution of the field and of the
teams at the RoboCup over the past years show that there are way for improvements.

For RoboCup2020, we intend to bring major modification to the league structure
in order to achieve the following objectives:
allow more diversity in the league,
increase the coherency of the structure with actual status of the competition
and finally propose a more flexible structure which can be easily adapted.

The scheduled changes are as follows:
\begin{itemize}
\item Restructuring regular tournament
\item Open Humanoid Leagues
\item Humanoids Demo Events
\item Update of the technical challenges
\end{itemize}

This section starts by describing the changes and then summarize the impacts on
organization.

% TODO add emergency button (safe robotics) ?

\subsubsection{Restructuring regular tournament}

While the number of teams involved in the TeenSize league has globally increased
since 2010, the height of the robots in this league is globally decreasing and
entering the buffer zone between KidSize (max 90cm) and TeenSize(min 80cm).
\begin{description}
\item[RoboCup 2017:] 5 teams had robots larger than 90cm.
\item[RoboCup 2018:] Only 1 team had a robot above 90cm (94cm).
\item[RoboCup 2019:] According to the qualification material, all teams have
  robots between 80 and 90cm.
\end{description}

In regard of these elements, we propose to integrate the small robots from
TeenSize to the KidSize and the larger robots to the AdultSize.

Increasing the number of participants in each league would also make it easier
to separate the main league in two divisions, allowing experienced teams to have
more competitive games and new teams to have a more interesting event.
It would also be interesting to increase the average number of robots on
the pitch without loosing teams du to financial issues.
Finally, while Drop-In games has triggered the interest of multiple teams,
some teams find that it overloads the schedule, especially during the knock-out
phases.

In order to solve these problems, the tournament will use the following
structure:
\begin{enumerate}
\item The tournament will start by all the Drop-In games. This phase will
  require only one robot per team.
\item Teams who have not the maximum number of robots allowed for their league
  are required to form combined teams in order to form a full team of robots.
\item If there are less than 16 teams in the league after the merge procedure,
  all teams play in division A.
  If there are more than 16 merged teams, repartition of the teams is based
  on the result of the teams during Drop-In games and play-off games.
  \begin{description}
  \item[Division A:] Best 6 teams + winners of play-offs for teams 7-10.
  \item[Division B:] Losers from play-offs teams 7-10, teams 11-20,
    winners of play-offs for teams 21-28.
  \end{description}
\end{enumerate}

This structure ensures that teams who have a single robot can participate and
play a fair number of games.
Teams with more resources are allowed to present a full team in order to work
on their teamplay during the year.
Finally, this method ensures that the fields will have the appropriate number
of robots, from the Drop-In to the regular tournaments.

\subsection{Open Humanoid Leagues}

\subsection{Humanoids Demo Events}

\subsection{Update of the technical challenges}

\section{\label{sec:LongTerm}Long-term: event triggered roadmap}

% TODO: Reminder of the reason pushing toward event-triggered roadmap

% TODO: Description of structure of the document

\subsection{Guiding principles}

% Events or measures are used to trigger the changes
Changes in the rules will be triggered by either research breakthrough or
continuous improvement of some skills. Those improvements will be ensured
through either measures of metrics during the game such as walking speed or
success at technical challenges. This will ensure that the rules improvements
are coherent with the capabilities of the robots in the league.

% Triggered changes apply with a delay, useful for teams and LOC
During the roadmap workshops and the polls, several teams requested to have
updates rules known sooner, in order to plan their development for the
competition. Similar issues arise for local organization with changes regarding
the size of the fields. In order to provide more time to teams and local
organizers while still allowing adaptation of the rules, we propose to separate
the evolution of the league in three categories depending on the number of years
required between announcement of the rule change and its application. Note that
we consider a 4 month period to allow the TC to implement the changes inside the
rulebook.
\begin{description}
\item[1Y:] Changes which can be done from one competition to the other without
  requiring previous announcement. This is limited to rule changes which have
  low impact on the robot design and do not require additional space for the
  competition. These changes have to be announced at least 8 months prior
  to the competition.
\item[2Y:] Changes which might require significant hardware investment for the
  teams or important modifications for the local organizers. These changes have
  to be announced at least 20 months prior implementation.
\item[5Y:] Major changes which require drastic modifications on robot design.
  These changes shave to be announced at least 56 months prior to the
  competition.
\end{description}

% TODO: Is change based on 'best team', 'n best teams' or something else?

\subsection{Metrics used}
% TODO: fill it

\subsection{Detailed rule changes}

\subsubsection{Field evolution}
The dimensions of the goal is a crucial aspect to ensure that scoring and
defending goals are both possible. It makes sense that the ratio between the
field width and the goal width is similar to the ratio in human soccer, but
depending on kick accuracy and capacity of diving for goalies, it might be
required to have smaller or larger goals.

%TODO: add recap diagram with transition elements

\subsubsection{Handlers}

\subsection{League status}
% TODO: Separate diagram in 2/3 different diagrams? Skills and rules?
% TODO: Add notes on the level
\begin{sidewaysfigure}
\input{diagram.tex}
\end{sidewaysfigure}


\section{Evolution of the document}

\begin{itemize}
\item Status of the 'long-term' part updated yearly to assess progress
\item Status of the 'short-term' part updated every year or every two years
\item Scientific problematics: updated every 5 years
\end{itemize}

% TODO: Summarizing rule changes?
%\section{Past evolutions}

\newpage

\printbibliography


\end{document}
